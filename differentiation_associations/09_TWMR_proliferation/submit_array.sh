#!/bin/bash
# Submit an array of 1000 jobs for TWMR input generation across all treatments 

module load HGI/softpack/groups/otar2065/otar2065_9/44 
# bsub  -J "array_TWMR_model_creation[1-1000]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh

## Re-run failed jobs
# bsub  -J "array_TWMR_model_creation_rerun1[1,3,4,5,6,7,8,10,11,12,14,15,16,17,19,20,22,23,28,29,30,31,32,33,34,37,44,46,47,48,53,54,55,57,58,61,64,66,67,68,71,72,73,74,75,76,77,82,83,85,86,87,88,89,90,91,92,94,96,97,98,101,102,103,105,106,107,108,109,110,112,115,116,117,118,119,120,121,122,123,124,125,126]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun2[127,128,129,130,131,132,133,134,135,136,137,139,140,141,142,143,144,146,147,148,149,151,152,154,156,157,158,159,160,164,167,169,170,171,172,173,174,175,179,180,187,189,197,199,200,204,205,206,207,208,209,210,212,217,220,223,228,230,231,233,234,235,236,238,239,240,241,242]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun3[244,246,247,248,249,250,251,252,253,254,255,257,258,259,260,261,264,265,266,267,269,272,279,291,297,298,300,303,310,315,316,318,319,320,322,324,326,327,329,330,331,336,337,338,340,341,342,344,353,356,362,363,364,398,399,416,417,426,432,466,481,482,483,531,532,533,534,535]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun4[536,537,538,539,541,544,547,549,550,552,553,554,555,559,560,562,563,564,565,568,569,570,572,573,575,576,578,581,584,586,587,588,648,649,892,893,923,924,925]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh

# bsub  -J "array_TWMR_model_creation_rerun_IFN[8,10,11,12,31,34,37,75,87,90,108,125,126,127,132,133,140,149,152,156,170,197,234,235,248,249,252,253,297,340,398,416,481,532,568,572,648,892,923,924]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun_IFN[8,11,12,37,75,87,90,108,125,127,132,140,197,892]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun_LPS[3,7,8,10,11,12,14,16,23,31,34,37,67,73,75,76,87,90,91,102,105,106,107,108,118,119,122,123,124,125,126,127,129,130,131,132,133,134,135,136,140,141,146,147,149,152,154,156,164,169,170,171,197,233,234,235,236,238,240,241,244,248,249,252,253,255,256,261,269,297,298,326,336,340,341,342,343,353,398,399,416,417,418,466,481,483,532,533,541,563,565,566,568,569,570,572,573,581,587,588,648,649,650,892,923,924]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun_LPS[107,126,131,140,156,170,171,234,238,240,241,255,466,565]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh

# bsub  -J "array_TWMR_model_creation_rerun_untreated1[3,4,6,7,8,10,11,12,14,16,20,22,23,28,29,30,31,32,34,37,44,48,53,57,58,67,68,71,73,74,75,82,83,87,89,90,94,96,97,101,102,105,106,107,108,109,110,112,116,117,118,119,120,121,122,123,124,125,126,127,129,130,131,132,133,134,135,136,137,139,140,141,142,143,144,146,147]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun_untreated2[149,152,153,154,156,159,160,164,169,170,171,172,173,179,189,190,197,200,201,206,208,209,210,212,231,233,234,235,236,237,238,239,240,241,242,244,246,247,248,249,252,253,254,255,256,258,259,261,264,266,269,297,298,326,330,331,332,336,340,341,342,343,353,356,362,363]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun_untreated3[398,399,400,416,417,418,466,467,481,482,483,484,532,533,535,536,538,539,540,541,542,544,547,552,553,563,564,565,568,569,570,572,581,587,588,648,649,892,893,923,924,925]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun_untreated4[4,7,10,12,16,29,31,34,37,44,67,73,75,83,87,94,106,107,109,110,112,119,120,122,123,124,125,126,127,129,130,131,132,133,134,137,140,141,142,143,146,149,156,159,160,169,170,171,172,173,179,197,208,231,233,234,235,236,238,240,249,259,261,330,341,565]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh
# bsub  -J "array_TWMR_model_creation_rerun_untreated5[123,129,133,142,149,169,231,233,234]"  -q normal -R "select[mem>40000] rusage[mem=40000]" -M 40000 -G teamtrynka -o "./logs/01_IVs_and_exposures_selection/out.%J.%I" -e  "./errors/01_IVs_and_exposures_selection/err.%J.%I" sh ./run_01_IVs_and_exposures_selection.sh


